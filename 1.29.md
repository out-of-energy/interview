明白!你需要的是**详细的评分标尺**,不是简单的三档,而是要能让你精准判断"他到底答到什么程度"。

我现在给你做**加强版判分锚点**,每个问题都给你:

1. **不合格的具体表现**(说什么话就直接pass)
2. **合格但普通**(能用但不亮眼)
3. **良好**(有经验有思考)
4. **专家级**(让你眼前一亮的答案)

而且我会给你**听到什么关键词就打几分**的具体指引。

---

## 一、开场与项目真实性(5分钟)

### Q0｜项目总览(必问)

**问题:**
> 你最近2年最核心的一个项目是什么?如果今天系统出问题,第一个被拉进去救火的是哪个模块?

**举例说明:**
> 比如你做的是银行核心账务系统,那我想知道的不是"我负责账务模块",而是——如果今天凌晨2点账务对账出问题了,你是那个必须被叫醒的人吗?具体是哪个子模块,比如是清算引擎、还是分录生成、还是余额校验?

**详细判分锚点:**

❌ **不合格(0-3分):**
- 只说"做后端开发"、"写接口"、"支持业务需求"
- 说不清系统边界,例如"整个系统我都负责"
- 无法说出具体模块名称
- 用大量业务黑话但说不清技术实现
- **信号词:**"配合"、"协助"、"参与"、"支持"

⚠️ **基础合格(4-6分):**
- 能说清模块名称和职责范围
- 能说出日常工作内容(开发、联调、上线)
- 能说出系统依赖的上下游
- 但说不清自己的不可替代性
- **信号词:**"负责XX模块"、"实现了XX功能"、"对接了XX系统"

✅ **良好(7-8分):**
- 能说清业务目标(为什么做这个系统)
- 能说清技术边界(哪些能做、哪些做不了)
- 能说清自己在团队中的位置(是核心开发?还是owner?)
- 能举例说明救火场景
- **信号词:**"我设计的"、"我主导的"、"核心瓶颈是"、"我解决过"

🏆 **专家级(9-10分):**
- 能说清业务价值+技术难点+自己的独特贡献
- 能说出"如果我不在,XX事情就得停"的模块
- 能说出系统演进史和未来规划
- 能主动提及技术债务和trade-off
- **信号词:**"我当时选择XX方案是因为..."、"这个设计的长期成本是..."、"如果重来我会..."

---

## 二、Java & JVM 实战(10分钟)

### Q1｜GC 真实事故题

**问题:**
> 你在线上遇到过最严重的一次GC问题是什么?当时的现象、定位路径、最终解决方案?

**举例说明:**
> 比如我之前遇到过:每天下午3点业务高峰,接口RT从200ms飙到5秒,监控显示Full GC频繁触发。我想听你说的是——你当时看到什么现象(是接口超时?还是CPU飙高?),你怎么确认是GC导致的(看的gc.log还是jstat?),最后是调参数、改代码、还是扩容解决的?

**详细判分锚点:**

❌ **不合格(0-3分):**
- "没遇到过GC问题"或"运维负责的"
- "加内存就好了"、"重启解决"
- 说不出具体GC类型(Young GC/Full GC)
- 说不出用的什么GC收集器
- **信号词:**"不太清楚"、"好像是"、"应该是内存不够"

⚠️ **基础合格(4-6分):**
- 能说出现象(RT变慢、CPU高、内存告警)
- 知道看GC日志或监控
- 知道调整-Xms、-Xmx参数
- 但说不清为什么调这个值
- **信号词:**"调大了堆内存"、"看了GC日志"、"加了监控"

✅ **良好(7-8分):**
- 能说清定位路径:监控报警→GC日志→jstat/jmap→dump分析
- 能说出具体GC收集器(G1/CMS/ZGC)和参数调整
- 能说出是Young GC频繁还是Full GC
- 能说出排查时长和影响范围
- **信号词:**"通过jstat -gcutil看到..."、"dump下来用MAT分析发现..."、"调整了-XX:MaxGCPauseMillis"

🏆 **专家级(9-10分):**
- 能说清根因(大对象、内存泄漏、晋升失败等)
- 能说出如何验证不是内存泄漏(对比多次dump)
- 能说出代码级优化(对象复用、减少临时对象)
- 能说出为什么选择这个GC收集器(业务特点决定)
- 能说出后续监控和预防措施
- **信号词:**"发现大量XX对象没有被回收"、"改用对象池"、"调整晋升阈值-XX:MaxTenuringThreshold"、"后来加了GC告警阈值"

---

### Q2｜并发翻车题

**问题:**
> 你有没有处理过并发Bug,而且是线上才暴露的?

**举例说明:**
> 比如:库存扣减在压测时没问题,上线后偶尔出现超卖。或者账户余额更新时,两个线程同时操作导致余额不一致。我想知道你当时怎么复现的、用了什么锁或并发工具、最后怎么改的代码?

**详细判分锚点:**

❌ **不合格(0-3分):**
- "没遇到过"或"我们没有高并发场景"
- "加synchronized就行了"(但说不清加在哪)
- "这是测试的问题,应该测出来"
- **信号词:**"没想到会并发"、"理论上不会"

⚠️ **基础合格(4-6分):**
- 能说出并发问题的表现(数据不一致、超卖、重复提交)
- 知道用synchronized或Lock
- 知道数据库加了唯一索引
- 但说不清为什么线下没复现
- **信号词:**"加了锁"、"用了synchronized"、"数据库加了唯一约束"

✅ **良好(7-8分):**
- 能说清并发问题的根因(竞态条件、可见性、有序性)
- 能说出如何复现(压测工具、多线程脚本)
- 能说出用了CAS、ReentrantLock、或分布式锁
- 能说出锁的粒度和性能影响
- **信号词:**"check-then-act的竞态"、"用AtomicInteger替换"、"ReentrantLock可以tryLock避免死等"、"缩小了锁的范围"

🏆 **专家级(9-10分):**
- 能复盘设计失误(为什么一开始没考虑并发)
- 能说出重构思路(无锁化、乐观锁、分段锁)
- 能说出监控和兜底方案(对账、补偿)
- 能说出性能和正确性的权衡
- **信号词:**"一开始设计时假设了单线程"、"改用ConcurrentHashMap分段降低冲突"、"加了定时对账任务"、"牺牲了XX性能换取一致性"

---

## 三、Spring Boot & 框架理解(10分钟)

### Q3｜自动配置反噬题

**问题:**
> 你有没有遇到Spring Boot自动配置和你预期不一致的情况?怎么干预的?

**举例说明:**
> 比如:你项目里引入了某个starter,结果发现它自动配置的数据源不是你想要的那个,或者Redis配置被覆盖了。你是怎么发现的?是通过日志、还是actuator的/conditions端点?最后是排除了自动配置、还是自己写了@Configuration覆盖?

**详细判分锚点:**

❌ **不合格(0-3分):**
- "没遇到过"或"Spring Boot都配好了"
- "改改配置文件就行"(但说不清改什么)
- 不知道什么是自动配置
- **信号词:**"一直很正常"、"没注意过"

⚠️ **基础合格(4-6分):**
- 知道Spring Boot有自动配置
- 知道用@SpringBootApplication的exclude排除
- 知道application.yml能覆盖一些配置
- 但说不清原理
- **信号词:**"排除掉了XX自动配置"、"改了配置文件"

✅ **良好(7-8分):**
- 能说出如何发现问题(启动日志、debug模式、actuator)
- 能说出用@ConditionalOnXX注解的原理
- 能说出通过@Configuration覆盖Bean
- 能说出为什么自动配置没生效(缺依赖、条件不满足)
- **信号词:**"通过--debug看到XX配置没生效"、"因为缺少XX依赖导致@ConditionalOnClass不满足"、"自己定义了同名Bean覆盖"

🏆 **专家级(9-10分):**
- 能说出starter的原理(META-INF/spring.factories)
- 能说出@AutoConfigureBefore/After的加载顺序
- 能说出自己写过starter或深度定制过自动配置
- 能说出如何调试自动配置冲突
- **信号词:**"看了spring-boot-autoconfigure的源码"、"用@AutoConfigureAfter调整顺序"、"我们团队封装了统一的starter"

---

### Q4｜事务失效题(银行必问)

**问题:**
> 你有没有遇到过事务看起来加了,但实际上没生效的情况?

**举例说明:**
> 比如:你在Service方法上加了@Transactional,但同一个类里另一个方法调用它时,事务没生效,数据库出现了脏数据。或者你在private方法上加了@Transactional根本不起作用。你是怎么发现的?最后怎么改的?

**详细判分锚点:**

❌ **不合格(0-3分):**
- "加@Transactional就能保证事务"
- "没遇到过失效"
- 说不出任何失效场景
- **信号词:**"应该不会失效吧"、"框架会处理"

⚠️ **基础合格(4-6分):**
- 知道private方法事务不生效
- 知道同类调用事务不生效
- 知道异常被catch了事务不回滚
- 但说不清原理
- **信号词:**"改成public了"、"拆成两个类"、"把try-catch去掉了"

✅ **良好(7-8分):**
- 能说出代理机制(AOP动态代理)
- 能说出传播行为(REQUIRED/REQUIRES_NEW等)
- 能说出rollbackFor的作用
- 能说出如何验证事务生效(查数据库连接、日志)
- **信号词:**"因为是this调用,没走代理"、"用@Transactional(rollbackFor = Exception.class)"、"通过开启事务日志验证"

🏆 **专家级(9-10分):**
- 能说出多数据源场景下的事务问题
- 能说出分布式事务和本地事务的取舍
- 能说出事务传播行为的实际案例
- 能说出事务超时、隔离级别的设置
- **信号词:**"多数据源需要配置ChainedTransactionManager"、"用了Seata做分布式事务"、"REQUIRES_NEW会挂起当前事务"、"设置了@Transactional(timeout=30)"

---

## 四、数据库 & ORM 取舍(10分钟)

### Q5｜JPA 放弃题

**问题:**
> 你有没有在项目中放弃过JPA?为什么?

**举例说明:**
> 比如:你们系统一开始用JPA做CRUD很爽,但后来要做复杂报表、多表关联、动态SQL时,发现JPA的Criteria API写得很痛苦,N+1查询问题频发,最后改用了MyBatis或者JOOQ。我想知道你当时的决策点是什么?

**详细判分锚点:**

❌ **不合格(0-3分):**
- "一直用JPA没问题"或"从没用过JPA"
- "听说JPA不好就没用"
- 说不出JPA的优缺点
- **信号词:**"不了解"、"没用过"

⚠️ **基础合格(4-6分):**
- 知道JPA的N+1问题
- 知道复杂SQL用JPA不好写
- 知道MyBatis更灵活
- 但说不出具体场景
- **信号词:**"JPA性能不好"、"MyBatis更灵活"

✅ **良好(7-8分):**
- 能说出JPA适合的场景(简单CRUD、领域模型清晰)
- 能说出JPA不适合的场景(复杂报表、动态SQL、性能敏感)
- 能说出迁移成本和方案(部分模块用MyBatis)
- 能说出如何解决N+1(@EntityGraph、JOIN FETCH)
- **信号词:**"简单CRUD用JPA,复杂查询用MyBatis"、"用@EntityGraph解决N+1"、"Criteria API可读性差"

🏆 **专家级(9-10分):**
- 能说出框架选型的长期成本(团队学习曲线、可维护性)
- 能说出如何保证两种方式共存的一致性
- 能说出性能对比数据(压测结果)
- 能说出未来演进方向(JOOQ、QueryDSL)
- **信号词:**"团队对SQL更熟悉所以选MyBatis"、"做了性能对比JPA慢30%"、"用QueryDSL实现类型安全"、"保留JPA用于写操作,MyBatis用于读"

---

### Q6｜慢SQL实战

**问题:**
> 你遇到过最难定位的一次慢SQL是什么?

**举例说明:**
> 比如:某个查询接口平时很快,但每天凌晨跑批时就变慢。EXPLAIN看索引也用上了,但就是慢。最后发现是统计信息过期、或者锁等待、或者分页深度问题。你当时是怎么一步步排查的?

**详细判分锚点:**

❌ **不合格(0-3分):**
- "加索引就好了"
- "没遇到过"
- 说不出EXPLAIN怎么看
- **信号词:**"不知道"、"DBA处理的"

⚠️ **基础合格(4-6分):**
- 知道用EXPLAIN查看执行计划
- 知道加索引
- 知道看慢查询日志
- 但说不出为什么慢
- **信号词:**"EXPLAIN看到全表扫描"、"加了索引"、"type是ALL"

✅ **良好(7-8分):**
- 能说出索引失效的原因(函数、类型转换、前缀模糊)
- 能说出锁等待、统计信息过期等复杂原因
- 能说出分页深度问题和解决方案
- 能说出SQL改写或业务优化
- **信号词:**"WHERE条件用了函数导致索引失效"、"用show processlist看到锁等待"、"深度分页改用游标"、"统计信息过期用ANALYZE TABLE更新"

🏆 **专家级(9-10分):**
- 能说出业务建模调整(反范式、宽表)
- 能说出缓存、异步、分库分表等架构优化
- 能说出性能测试和容量规划
- 能说出监控和预警机制
- **信号词:**"改成宽表避免JOIN"、"热数据用Redis缓存"、"按时间分表"、"设置了慢SQL告警阈值50ms"

---

## 五、API 设计专项(15分钟｜重点)

### Q7｜API 设计优先级

**问题:**
> 你设计一个API时,最先考虑的3件事是什么?

**举例说明:**
> 比如你要设计一个"转账"接口,你是先想URL怎么写、还是先想幂等怎么保证、还是先想错误码怎么定义?我想知道你的思考顺序是什么。

**详细判分锚点:**

❌ **不合格(0-3分):**
- "REST风格"、"返回JSON"等技术细节
- "按照需求文档实现"
- 说不出业务层面的考虑
- **信号词:**"用POST还是GET"、"返回什么字段"

⚠️ **基础合格(4-6分):**
- 考虑安全性(鉴权、加密)
- 考虑易用性(字段命名、文档)
- 考虑性能(响应时间)
- 但缺乏系统性思考
- **信号词:**"要加鉴权"、"要写文档"、"要快"

✅ **良好(7-8分):**
- 考虑幂等性(避免重复操作)
- 考虑错误处理(错误码设计)
- 考虑向后兼容(字段扩展)
- 考虑监控和可观测性
- **信号词:**"要保证幂等"、"错误码要统一"、"要考虑未来扩展"、"要能追踪调用链"

🏆 **专家级(9-10分):**
- 考虑演进成本(版本管理、灰度)
- 考虑业务语义(操作的原子性、补偿)
- 考虑运营需求(审计日志、数据统计)
- 能说出优先级排序和trade-off
- **信号词:**"先保证幂等和错误模型,性能可以后续优化"、"要支持审计追溯"、"要考虑灰度发布时新老版本共存"

---

### Q8｜资源建模(账户冻结)

**问题:**
> 设计"账户冻结/解冻"API,你的URL和方法?

**举例说明:**
> 比如有人会设计成`POST /account/freeze`,有人会设计成`PUT /account/{id}/status`,还有人会设计成`POST /account/{id}/freeze-records`。我想听你说为什么这么设计,未来如果要支持"部分冻结"或"冻结原因"怎么扩展?

**详细判分锚点:**

❌ **不合格(0-3分):**
- `POST /freeze` 或 `GET /freezeAccount` 等动词接口
- 说不出RESTful原则
- 无扩展性考虑
- **信号词:**"用POST调用freeze接口"、"传个accountId就行"

⚠️ **基础合格(4-6分):**
- `PUT /account/{id}/status` 修改状态
- `POST /account/{id}/freeze` 冻结操作
- 知道用PUT或POST
- 但说不出为什么
- **信号词:**"用PUT修改状态"、"用POST触发冻结"

✅ **良好(7-8分):**
- `POST /account/{id}/freeze-records` 创建冻结记录
- 能说出冻结是一个资源,不是状态
- 能说出支持多次冻结/部分冻结
- 能说出查询冻结记录的接口设计
- **信号词:**"冻结记录是一个资源"、"支持查询历史冻结记录"、"POST创建冻结,DELETE解冻"

🏆 **专家级(9-10分):**
- 能说出冻结原因、冻结金额、到期时间等扩展字段
- 能说出幂等性设计(重复冻结的处理)
- 能说出与业务事件的关联(冻结触发通知)
- 能说出权限控制(谁能冻结)
- **信号词:**"freeze-record包含reason、amount、expire_time"、"用业务唯一键保证幂等"、"冻结后发送MQ通知下游"、"区分操作冻结和司法冻结"

---

### Q9｜幂等性(银行必杀)

**问题:**
> 哪些接口必须保证幂等?你是怎么设计的?

**举例说明:**
> 比如转账、扣款、发奖励这些接口,如果用户重复点击或者网络超时重试,不能重复扣钱。你是用业务流水号、还是Redis分布式锁、还是数据库唯一索引来保证?幂等key的生命周期多长?

**详细判分锚点:**

❌ **不合格(0-3分):**
- "前端禁用按钮就行"
- "加个loading不让重复点击"
- 不理解幂等性
- **信号词:**"前端控制"、"不会重复调用"

⚠️ **基础合格(4-6分):**
- 知道转账、支付等需要幂等
- 知道用唯一流水号
- 知道用Redis或数据库
- 但说不出细节
- **信号词:**"用订单号保证唯一"、"存到Redis里"

✅ **良好(7-8分):**
- 能说出幂等key的生成规则(业务ID+操作类型)
- 能说出Redis的key过期时间设置
- 能说出数据库唯一索引的方案
- 能说出幂等和防重的区别
- **信号词:**"幂等key = userId + orderId + operationType"、"Redis设置24小时过期"、"唯一索引捕获DuplicateKeyException"、"幂等是多次调用结果一致,防重是拒绝重复调用"

🏆 **专家级(9-10分):**
- 能说出幂等key的生命周期管理(清理策略)
- 能说出MQ消费的幂等处理
- 能说出分布式场景下的幂等(多实例)
- 能说出幂等失败的降级方案
- **信号词:**"MQ消费用msgId作为幂等key"、"定时任务清理过期key"、"用Redis分布式锁+业务唯一键双重保证"、"幂等失败返回特定错误码让客户端重试"

---

### Q10｜API 版本演进

**问题:**
> 一个被多个系统依赖的API,现在要改返回结构,你怎么做?

**举例说明:**
> 比如你的用户信息接口,原来返回`{name, phone}`,现在要加`email`字段还好办,但如果要把`phone`改成`phoneList`数组呢?有10个下游系统在调,你是直接改、还是出v2版本、还是两个字段都保留一段时间?

**详细判分锚点:**

❌ **不合格(0-3分):**
- "直接改,通知下游一起改"
- "改完测试一下就行"
- 不考虑兼容性
- **信号词:**"让他们改代码"、"一起发版"

⚠️ **基础合格(4-6分):**
- 知道要出v2版本(/v1 /v2)
- 知道要通知下游
- 知道要给迁移时间
- 但说不出具体方案
- **信号词:**"出个v2版本"、"给他们时间迁移"

✅ **良好(7-8分):**
- 采用字段只加不减策略(同时返回phone和phoneList)
- 设置迁移期限和下线计划
- 监控旧字段的使用情况
- 提供迁移文档和示例
- **信号词:**"同时保留phone和phoneList,phone标记为deprecated"、"监控phone字段的访问量"、"给3个月迁移期"、"提供迁移指南"

🏆 **专家级(9-10分):**
- 采用Header或参数版本控制(更灵活)
- 灰度发布新版本(先部分流量)
- 自动化监控和告警(谁还在用旧版)
- 有明确的下线SOP
- **信号词:**"用Accept-Version header控制版本"、"先灰度5%流量验证"、"每周发送迁移进度报告给下游"、"旧版本下线前做最后通告和应急预案"

---

### Q10-补｜API Review 能力(收官题)

**问题:**
> 如果现在让你review一个完全陌生系统的API,你第一眼会看什么?

**举例说明:**
> 比如你拿到一份新系统的API文档,有20个接口。你是先看每个接口的功能、还是先看命名风格一不一致、还是先看错误码设计、还是先看有没有幂等标识?我想知道你作为专家的review思路。

**详细判分锚点:**

❌ **不合格(0-3分):**
- "看看能不能调通"
- "看看返回什么数据"
- 没有系统性review思路
- **信号词:**"试试看"、"调一下接口"

⚠️ **基础合格(4-6分):**
- 看文档是否清晰
- 看请求示例是否完整
- 看错误处理是否规范
- 但缺乏深度
- **信号词:**"看文档写得怎么样"、"看有没有示例"

✅ **良好(7-8分):**
- 看命名一致性(驼峰还是下划线、单复数)
- 看错误码设计(是否统一、是否可扩展)
- 看幂等性标识(哪些接口标注了幂等)
- 看分页、排序、过滤的统一性
- **信号词:**"检查命名规范是否一致"、"检查错误码是否冲突"、"检查幂等接口是否有标识"

🏆 **专家级(9-10分):**
- 看是否"像一个人写的"(风格统一性)
- 看资源建模是否合理(RESTful程度)
- 看演进能力(是否考虑扩展)
- 看监控埋点(是否可观测)
- **信号词:**"检查是否符合领域模型"、"检查扩展字段的预留"、"检查是否有traceId"、"如果这20个接口看起来像20个人写的,就有问题"

---

### Q11｜错误码设计

**问题:**
> 你们系统的错误码是怎么设计和治理的?

**举例说明:**
> 比如有的团队所有错误都返回HTTP 200,靠`code`字段区分;有的用HTTP状态码+业务错误码。你们是哪种?错误码是谁定义的、怎么保证不冲突、前端怎么根据错误码做不同提示?

**详细判分锚点:**

❌ **不合格(0-3分):**
- "都返回200,靠message区分"
- "没有错误码,直接返回异常信息"
- "前端自己判断"
- **信号词:**"返回异常堆栈"、"message写中文"

⚠️ **基础合格(4-6分):**
- HTTP状态码+业务错误码
- 有错误码枚举类
- 前端能根据code做判断
- 但缺乏治理
- **信号词:**"200成功,400参数错误,500系统错误"、"定义了ErrorCode枚举"

✅ **良好(7-8分):**
- 错误码分层(系统级、业务级)
- 错误码有命名规范(模块+错误类型)
- 有错误码文档
- 有code review机制避免冲突
- **信号词:**"错误码格式:A01001,A代表账户模块,01代表参数错误"、"有统一的错误码管理文档"、"新增错误码要review"

🏆 **专家级(9-10分):**
- 错误码稳定(不随意改动)
- 可审计(错误码对应的日志可追溯)
- 可监控(错误码报警)
- 国际化支持(错误码+多语言message)
- **信号词:**"错误码一旦发布不允许修改含义"、"每个错误码都有对应的日志和追踪ID"、"配置了高频错误码告警"、"错误码对应的message支持中英文"

---

### Q12｜性能约束(RT)

**问题:**
> 一个API RT要求100ms,你在设计阶段会做哪些约束?

**举例说明:**
> 比如你要设计一个"查询用户持仓列表"接口,产品要求100ms返回。你会怎么保证?是强制分页、用缓存、还是限制查询条件?如果下游数据库查询就要80ms怎么办?

**详细判分锚点:**

❌ **不合格(0-3分):**
- "先实现功能,后面再优化"
- "加缓存就行"
- 没有量化思维
- **信号词:**"到时候看情况"、"应该不会慢"

⚠️ **基础合格(4-6分):**
- 知道要加缓存
- 知道要加索引
- 知道要分页
- 但说不出具体约束
- **信号词:**"用Redis缓存"、"强制分页"

✅ **良好(7-8分):**
- 默认分页(pageSize默认20,最大100)
- 设置超时时间(数据库、HTTP)
- 异步加载非核心数据
- 限制查询条件(必须指定时间范围)
- **信号词:**"限制每页最多100条"、"数据库查询超时30ms"、"非核心字段异步加载"、"必须指定开始和结束时间"

🏆 **专家级(9-10分):**
- fail-fast设计(参数校验提前返回)
- 降级方案(缓存失效时返回部分数据)
- 监控和告警(P99超过阈值报警)
- 容量规划(预估QPS和数据量)
- **信号词:**"参数校验不合法直接返回,不查数据库"、"缓存失效时返回Top10,不返回全部"、"设置P99<100ms的告警"、"预估峰值QPS 1000,提前压测"

---

## 六、系统稳定性 & 微服务(10分钟)

### Q13｜RT 飙升排查题(王炸)

**问题:**
> 核心接口RT从200ms升到2s,你的排查顺序?

**举例说明:**
> 比如你的支付接口突然变慢,用户投诉。你是先看应用日志、还是先看数据库慢查询、还是先看下游服务是否超时、还是先看机器CPU/内存?我想知道你的排查SOP。

**详细判分锚点:**

❌ **不合格(0-3分):**
- "看代码有没有问题"
- "重启试试"
- 没有系统性排查思路
- **信号词:**"检查代码"、"重启服务"

⚠️ **基础合格(4-6分):**
- 看应用日志
- 看数据库慢查询
- 看机器监控
- 但没有优先级
- **信号词:**"查日志"、"看慢SQL"、"看CPU"

✅ **良好(7-8分):**
- 先看监控大盘(QPS、RT、错误率)
- 对比历史基线(是突然变慢还是逐渐变慢)
- 看链路追踪(哪个环节慢)
- 看下游依赖(数据库、Redis、其他服务)
- **信号词:**"先看Grafana监控"、"对比昨天同时段"、"看SkyWalking链路"、"检查下游服务是否降级"

🏆 **专家级(9-10分):**
- 有标准排查手册(runbook)
- 快速定位(5分钟内定位到层级)
- 快速止损(熔断、降级、限流)
- 根因分析和复盘
- **信号词:**"按照预案先熔断下游"、"3分钟内定位到XX服务慢查询"、"触发限流保护核心链路"、"事后复盘发现是XX配置变更导致"

---

### Q14｜一致性取舍

**问题:**
> 你在项目中如何权衡一致性和性能?举真实例子。

**举例说明:**
> 比如:账户余额查询,是每次都查库保证强一致、还是用缓存可以接受几秒延迟?订单状态更新后,积分系统是同步扣减还是MQ异步?你当时怎么判断的?

**详细判分锚点:**

❌ **不合格(0-3分):**
- "都要强一致"
- "都用缓存提高性能"
- 不理解CAP理论
- **信号词:**"不能有延迟"、"必须实时"

⚠️ **基础合格(4-6分):**
- 知道强一致性和最终一致性
- 知道缓存会有延迟
- 知道MQ异步会有时差
- 但说不出取舍依据
- **信号词:**"用缓存会不一致"、"MQ有延迟"

✅ **良好(7-8分):**
- 能说出业务场景决定一致性要求
- 能说出哪些场景可以最终一致(积分、通知)
- 能说出哪些场景必须强一致(余额、库存)
- 能说出补偿和对账机制
- **信号词:**"余额查询必须强一致,用户看到多少就是多少"、"积分发放可以异步,最终一致即可"、"每天凌晨跑对账任务"

🏆 **专家级(9-10分):**
- 能说出一致性的多个维度(读写一致、因果一致)
- 能说出具体的补偿策略(重试、人工介入)
- 能说出审计和可追溯性
- 能说出性能和一致性的量化权衡
- **信号词:**"允许积分延迟10秒到账,换取系统吞吐量提升5倍"、"用TCC补偿机制保证最终一致"、"所有资金操作都有审计日志可追溯"、"读自己写的一致性用本地缓存保证"

---

## 七、工程判断力(5分钟)

### Q15｜错误决策复盘

**问题:**
> 你做过的一个技术决策,事后证明是错的?

**举例说明:**
> 比如:你当时选了某个技术方案,上线后发现坑很多;或者你设计的表结构后来扩展很痛苦。我想知道你当时为什么这么选、后来怎么发现错了、最后怎么补救的?

**详细判分锚点:**

❌ **不合格(0-3分):**
- "没做错过决策"
- "都是别人的问题"
- 不愿承认错误
- **信号词:**"我的决策都是对的"、"需求改了"

⚠️ **基础合格(4-6分):**
- 能承认有过错误决策
- 能说出表面原因(技术不成熟、需求变化)
- 能说出后来改了
- 但缺乏深度反思
- **信号词:**"当时选了XX技术,后来发现不好用"、"改用了YY"

✅ **良好(7-8分):**
- 能说出决策时的背景和约束
- 能说出当时的权衡和选择理由
- 能说出后来发现的问题和改进方案
- 能说出吸取的教训
- **信号词:**"当时为了快速上线选了XX,但没考虑到YY场景"、"后来重构了核心模块"、"学到了要提前考虑扩展性"

🏆 **专家级(9-10分):**
- 能说出决策的长期成本和trade-off
- 能说出如果重来会怎么做
- 能说出团队的成长和流程改进
- 能说出如何避免类似错误
- **信号词:**"当时短期看是对的,但长期维护成本太高"、"如果重来我会选YY方案,虽然开发慢但可维护性好"、"之后建立了技术方案评审机制"、"现在做架构决策会写ADR文档"

---

### Q16｜接手老系统

**问题:**
> 如果你接手一个老系统,第一周会做什么?

**举例说明:**
> 比如:你新入职,接手一个运行3年的交易系统,没文档、原开发已离职。你是先看代码、还是先找运维要监控大盘、还是先跑一遍核心流程、还是先问业务方哪些功能最重要?

**详细判分锚点:**

❌ **不合格(0-3分):**
- "看代码"
- "重构一遍"
- 盲目动手
- **信号词:**"先把代码看一遍"、"代码太烂了要重写"

⚠️ **基础合格(4-6分):**
- 找文档看
- 搭建本地环境
- 问老员工
- 但缺乏系统性
- **信号词:**"看有没有文档"、"把项目跑起来"、"问问同事"

✅ **良好(7-8分):**
- 先看监控和日志(了解系统运行状况)
- 找业务方了解核心流程
- 看生产问题记录(历史踩过的坑)
- 梳理依赖关系(上下游)
- **信号词:**"先看Grafana监控,了解核心接口"、"问业务方哪些功能最重要"、"看Jira历史bug"、"画出系统依赖图"

🏆 **专家级(9-10分):**
- 先看流量和核心链路(二八原则)
- 建立可观测性(如果没有就先加监控)
- 只读一周(不改代码,只观察)
- 输出系统评估报告
- **信号词:**"先看Top 10接口的流量和RT"、"第一周不改代码,只加日志和监控"、"整理出核心链路文档"、"写一份系统健康度评估报告"

---

## 八、面试官速判总结

**专家信号(必须有):**
- 能讲失败案例,且有深度复盘
- 能讲trade-off,说出为什么不选另一个方案
- 能讲长期成本,不只看短期效果

**高风险信号(一票否决):**
- 只讲原则,不讲场景
- 只讲理论,没有实战
- 只讲成功,不讲失败
- 甩锅给别人(测试、产品、运维)

**银行加分项:**
- 审计意识(操作可追溯)
- 幂等意识(避免重复操作)
- 一致性意识(对账、补偿)
- 稳定性意识(降级、熔断、限流)

---

**使用建议:**

1. **打分方式:** 每题0-10分,60分及格,75分优秀,85分专家
2. **时间控制:** 每题3-5分钟,追问不超过2轮
3. **记录要点:** 听到关键信号词立即记录,面试后对照打分
4. **综合判断:** 不是每题都要10分,但核心题(GC、事务、API设计、RT排查)必须7分以上

需要我继续做那3个"面试官狠货"吗?👇  
1️⃣ "候选人常见废话 → 一句追问直接破功"对照表  
2️⃣ 面评模板(5分钟写完、专业好用)  
3️⃣ 45/60分钟标准出题路径
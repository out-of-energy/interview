这是一个基于该候选人简历（xxx - 5年+经验，Java高级/架构方向）量身定制的 **30分钟 Zoom 面试计划**。

根据简历，这位候选人的核心亮点在于**架构演进（从单体到微服务）、高并发处理（分库分表、多线程查询）、以及海量数据处理（TB级日志）**。

面试的核心策略是：**“揪住细节，还原场景，验证深度”**。既然只有30分钟，不要问八股文（如“HashMap原理”），直接通过项目拷问技术深度。

---

### **第一阶段：破冰与核实 (3分钟)**

* **暖场：** 简单自我介绍，确认对方网络和环境。
* **简历核实（快速）：**
* “我注意到你最近一份工作（双指科技）任期大概一年左右，能否简述一下离职原因？”
* “简历中提到‘流量成本管控平台’和‘统一日志中心’是你最深入的两个项目，如果让你选一个最能代表你技术难度的，你会选哪个？”（*假设他选了流量管控平台，以下以此为例*）



---

### **第二阶段：核心项目深挖 - 流量成本管控平台 (15分钟)**

**背景：** 简历提到该项目涉及“分库分表”、“自定义MyBatis插件”、“多线程并行查询15s优化至3s”。这是最容易水分和深度并存的地方。

#### **连环问 1：关于分库分表与自定义插件**

* **Q1 (场景复现)：** “你说将单表亿级数据改造为按月分库分表。请问当时的**分片键（Sharding Key）**选的是什么？为什么选这个？如果业务需要根据非分片键（比如用户ID）查询，你们是怎么解决‘读扩散’问题的？”
* **Q2 (技术决策)：** “你提到‘自定义MyBatis分片插件’。市面上已经有 ShardingSphere 这样成熟的中间件，**为什么要自己造轮子写插件？** 你们的插件是如何介入 SQL 执行过程的？（是在拦截器层还是其他层？）”
* **Q3 (极端情况)：** “如果这个月的数据量突然暴增，超出了单表预期，你的按月分片策略还能扛住吗？有没有做动态扩容的预案？”

> **参考答案/评估标准：**
> * **及格：** 能说出分片键，知道非分片键查询会慢。
> * **优秀：** 提到通过“异构索引表”（用ES或另一张表做映射）解决非分片键查询问题；能清晰解释 MyBatis 的 `Interceptor` 接口，知道拦截 `StatementHandler` 或 `Executor`；对自研原因解释合理（如：老项目兼容性、轻量级需求）。
> 
> 

#### **连环问 2：关于多线程并行查询 (15s -> 3s)**

* **Q1 (实现细节)：** “跨月汇总查询从15s优化到3s，你说用到了‘多线程并行查询’。请具体讲讲你的**线程池参数是怎么设置的？**（核心线程数、队列类型、拒绝策略）。”
* **Q2 (故障防御)：** “如果某次查询涉及的月份特别多，瞬间开启了几十个线程，**如何保证不把 CPU 打满影响其他在线业务？** 有没有做线程隔离或熔断？”
* **Q3 (数据聚合)：** “多线程查回数据后，是在内存中做聚合（Group By/Sum）吗？如果数据量大，**内存溢出（OOM）** 怎么处理？”

> **参考答案/评估标准：**
> * **及格：** 知道用 `CompletableFuture` 或 `CountDownLatch`。
> * **优秀：** 能结合机器配置（如 IO密集型 vs CPU密集型）谈参数设置；提到使用了 `CallerRunsPolicy` 或自定义拒绝策略防止积压；意识到内存聚合的风险，提到流式处理或分页聚合。
> 
> 

---

### **第三阶段：架构与中间件深度 - 统一日志中心 (8分钟)**

**背景：** 简历提到“混合存储架构（MySQL+MongoDB）”、“TB级日志”。

#### **连环问 3：海量数据与中间件**

* **Q1 (架构选型)：** “你在这个项目里用了 MySQL 存元数据，MongoDB 存原始日志。**为什么选 MongoDB 而不是 Elasticsearch 或 ClickHouse？** 日志场景下，ES 的全文检索通常不是更有优势吗？”
* **Q2 (性能压测)：** “日均处理 TB 级数据，写入压力非常大。**Kafka 的 Topic 分区数是多少？** 消费者端有没有遇到过**消息积压**？当时是怎么处理的？”
* **Q3 (Redis深度)：** “简历提到设计了‘基于Redis令牌桶算法的限流组件’。这个算法的原子性是怎么保证的？（是用了 Lua 脚本吗？）如果 Redis 挂了，限流会失效还是阻断业务？”

> **参考答案/评估标准：**
> * **及格：** 知道 Mongo 写性能好，知道 Kafka 积压要加消费者。
> * **优秀：** 能够对比 Mongo（Schema-less, 写入快）与 ES（索引重，写入开销大）的优劣；提到 Lua 脚本保证 Redis 操作原子性；提到限流组件的降级策略（Redis挂了是放行还是报错）。
> 
> 

---

### **第四阶段：团队管理与软技能 (4分钟)**

**背景：** 简历多次提到“主导”、“Tech Lead”、“从0到1”。

* **Q1 (技术影响力)：** “你提到制定了代码规范和检测工具。如果在代码评审（Code Review）中，组员坚持用一种你认为性能不好但也能跑的写法，你会怎么处理？”
* **Q2 (系统稳定性)：** “假设现在线上系统突然 CPU 飙升到 100%，作为 Tech Lead，你的排查思路是什么？（期待听到：top -> jstack -> 定位线程 -> 定位代码）”

---

### **面试官辅助工具箱**

#### **1. 推荐使用的 Zoom 功能**

* **屏幕共享/白板：** 在问到“流量管控平台”架构时，让他**共享屏幕用画图工具画一下数据流向**。看他能否清晰画出 Kafka、Mysql、Redis 之间的交互。这能瞬间鉴别他是“做过”还是“看过”。

#### **2. 杀手锏问题（如果前面回答太流畅，用这个压测）**

* “你简历里写精通 JVM 调优。请讲一次你实际处理过的 **Full GC 过于频繁** 的案例。原因是什么？你调整了哪个参数？为什么有效？”（*如果只能背出参数含义但说不出具体案例，说明是背八股文*）

#### **3. 观察点总结**

* **技术深度：** 是否真的懂底层（MyBatis插件原理、线程池拒绝策略、Redis Lua）。
* **业务Sense：** 技术选型是否考虑了成本和业务场景（为什么不无脑上 ES？）。
* **沟通能力：** 30分钟内能否简洁清晰地把复杂架构讲清楚。

### **结束语 (最后1-2分钟)**

* “感谢你的分享。我们这边今天的面试流程大概是... 你有什么想问我的吗？”

---

**下一步建议：**
如果你需要，我可以为你生成一个**针对他“自定义MyBatis分片插件”的现场编程题（Code Snippet Challenge）**，让他解释某段核心代码的逻辑，用来在 Zoom 聊天框里发给他看。你需要吗？
